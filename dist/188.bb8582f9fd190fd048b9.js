/*! For license information please see 188.bb8582f9fd190fd048b9.js.LICENSE.txt */
"use strict";(self.webpackChunktask_management_app=self.webpackChunktask_management_app||[]).push([[188],{697:(e,t,r)=>{r.d(t,{A:()=>n});const n=(0,r(9407).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6420:(e,t,r)=>{r.d(t,{BT:()=>d,Wu:()=>p,ZB:()=>u,Zp:()=>i,aR:()=>l,wL:()=>f});var n=r(4848),a=r(6540),o=r(9973),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)},c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},i=a.forwardRef((function(e,t){var r=e.className,a=c(e,["className"]);return(0,n.jsx)("div",s({ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r)},a))}));i.displayName="Card";var l=a.forwardRef((function(e,t){var r=e.className,a=c(e,["className"]);return(0,n.jsx)("div",s({ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r)},a))}));l.displayName="CardHeader";var u=a.forwardRef((function(e,t){var r=e.className,a=c(e,["className"]);return(0,n.jsx)("h3",s({ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r)},a))}));u.displayName="CardTitle";var d=a.forwardRef((function(e,t){var r=e.className,a=c(e,["className"]);return(0,n.jsx)("p",s({ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r)},a))}));d.displayName="CardDescription";var p=a.forwardRef((function(e,t){var r=e.className,a=c(e,["className"]);return(0,n.jsx)("div",s({ref:t,className:(0,o.cn)("p-6 pt-0",r)},a))}));p.displayName="CardContent";var f=a.forwardRef((function(e,t){var r=e.className,a=c(e,["className"]);return(0,n.jsx)("div",s({ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r)},a))}));f.displayName="CardFooter"},7188:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var n=r(4848),a=r(7767),o=r(7487),s=r(2102),c=r(6420),i=r(5660),l=r(5498);const u=(0,r(9407).A)("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var d=r(697),p=r(827),f=r(6445);const h=function(){var e=(0,a.Zp)(),t=(0,o.B)(),r=t.data,h=t.isLoading,y=t.error,m=(0,o.HC)(),v=m[0],x=m[1].isLoading;return h?(0,n.jsx)(i.A,{}):y?(0,n.jsx)(l.Fc,{variant:"destructive",children:(0,n.jsx)(l.TN,{children:"Failed to load reports. Please try again later."})}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Reports"}),(0,n.jsxs)("div",{className:"space-x-2",children:[(0,n.jsxs)(s.$,{variant:"outline",onClick:function(){return e=void 0,t=void 0,n=function(){var e,t,r,n;return function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(i){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,v().unwrap()];case 1:return e=a.sent(),t=window.URL.createObjectURL(e),(r=document.createElement("a")).href=t,r.download="reports-".concat((0,f.A)(new Date,"yyyy-MM-dd"),".csv"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r),[3,3];case 2:return n=a.sent(),console.error("Export failed:",n),[3,3];case 3:return[2]}}))},new((r=void 0)||(r=Promise))((function(a,o){function s(e){try{i(n.next(e))}catch(e){o(e)}}function c(e){try{i(n.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}i((n=n.apply(e,t||[])).next())}));var e,t,r,n},disabled:x,children:[(0,n.jsx)(u,{className:"h-4 w-4 mr-2"}),"Export to CSV"]}),(0,n.jsxs)(s.$,{onClick:function(){return e("/reports/create")},children:[(0,n.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"New Report"]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[null==r?void 0:r.reports.map((function(t){return(0,n.jsxs)(c.Zp,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:function(){return e("/reports/".concat(t.id))},children:[(0,n.jsx)(c.aR,{children:(0,n.jsx)(c.ZB,{children:t.title})}),(0,n.jsxs)(c.Wu,{children:[(0,n.jsx)("p",{className:"text-muted-foreground mb-4",children:t.description||"No description"}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,f.A)(new Date(t.date),"MMM dd, yyyy")}),(0,n.jsx)(p.A,{className:"h-4 w-4"})]})]})]},t.id)})),0===(null==r?void 0:r.reports.length)&&(0,n.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,n.jsx)(p.A,{className:"h-12 w-12 mx-auto text-muted-foreground"}),(0,n.jsx)("h2",{className:"mt-4 text-xl font-medium",children:"No reports found"}),(0,n.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Create a new report to get started"}),(0,n.jsx)(s.$,{className:"mt-4",onClick:function(){return e("/reports/create")},children:"Create Report"})]})]})]})}},7487:(e,t,r)=>{r.d(t,{B:()=>i,HC:()=>u,h_:()=>l});var n=r(3958),a=function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function s(e){try{i(n.next(e))}catch(e){o(e)}}function c(e){try{i(n.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}i((n=n.apply(e,t||[])).next())}))},o=function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(i){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}},s=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},c=n.q.injectEndpoints({endpoints:function(e){return{getReports:e.query({query:function(e){void 0===e&&(e={});var t=new URLSearchParams;return e&&Object.entries(e).forEach((function(e){var r=e[0],n=e[1];void 0!==n&&t.append(r,String(n))})),"/reports?".concat(t.toString())},onQueryStarted:function(e,t){return a(this,arguments,void 0,(function(e,t){var r,a,s,c=t.queryFulfilled;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,c];case 1:return r=t.sent().data,a=new URLSearchParams(e).toString(),(0,n.E)("/reports?".concat(a),r),[3,3];case 2:return s=t.sent(),console.error("Failed to fetch reports:",s),[3,3];case 3:return[2]}}))}))},providesTags:function(e){return e?s(s([],e.reports.map((function(e){return{type:"Report",id:e.id}})),!0),[{type:"Report",id:"LIST"}],!1):[{type:"Report",id:"LIST"}]}}),getReportById:e.query({query:function(e){return"/reports/".concat(e)},onQueryStarted:function(e,t){return a(this,arguments,void 0,(function(e,t){var r,a,s=t.queryFulfilled;return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,s];case 1:return r=t.sent().data,(0,n.E)("/reports/".concat(e),r),[3,3];case 2:return a=t.sent(),console.error("Failed to fetch report ".concat(e,":"),a),[3,3];case 3:return[2]}}))}))},providesTags:function(e,t,r){return[{type:"Report",id:r}]}}),createReport:e.mutation({query:function(e){var t=new FormData;return Object.entries(e).forEach((function(e){var r=e[0],n=e[1];"attachments"!==r&&void 0!==n&&t.append(r,"string"==typeof n?n:JSON.stringify(n))})),e.attachments&&e.attachments.forEach((function(e){t.append("attachments",e)})),{url:"/reports",method:"POST",body:t,formData:!0}},invalidatesTags:[{type:"Report",id:"LIST"}]}),exportReportToCsv:e.query({query:function(e){void 0===e&&(e={});var t=new URLSearchParams;return e&&Object.entries(e).forEach((function(e){var r=e[0],n=e[1];void 0!==n&&t.append(r,String(n))})),{url:"/reports/export/csv?".concat(t.toString()),responseHandler:function(e){return e.blob()}}}})}}}),i=c.useGetReportsQuery,l=(c.useGetReportByIdQuery,c.useCreateReportMutation),u=c.useLazyExportReportToCsvQuery}}]);
//# sourceMappingURL=188.bb8582f9fd190fd048b9.js.map